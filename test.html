<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Game</title>
    <style>
        .player {
            width: 50px;
            height: 50px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .spell {
            width: 20px;
            height: 20px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            display: none;
        }
    </style>
</head>
<body>
    <div class="player" id="player"></div>
    <div class="spell" id="spell"></div>

    <script>
        class Sprite {
            constructor({position, velocity, size = {s: 1}, pointDeVie}) {
                this.size = size;
                this.position = position;
                this.velocity = velocity;
                this.moving = false;
                this.pointDeVie = pointDeVie;
                this.element = null;
            }

            draw() {
                if (!this.element) return;

                this.element.style.left = this.position.x + 'px';
                this.element.style.bottom = this.position.y + 'px';
            }
        }

        class Spell {
            constructor() {
                this.element = document.getElementById('spell');
            }

            launch(x, y) {
                this.element.style.display = 'block';
                this.element.style.bottom = y + 'px';
                this.element.style.left = x + 'px';
                this.interval = setInterval(() => {
                    this.move();
                }, 10);
            }

            move() {
                let bottom = parseInt(this.element.style.bottom);
                if (bottom >= window.innerHeight) {
                    clearInterval(this.interval);
                    this.interval = null;
                    this.element.style.display = 'none';
                    this.element.style.bottom = '0px';
                } else {
                    bottom += 5;
                    this.element.style.bottom = bottom + 'px';
                }
            }
        }

        const player = new Sprite({
            position: { x: window.innerWidth / 2, y: window.innerHeight - 50 },
            velocity: { x: 0, y: 0 },
            size: { s: 1 },
            pointDeVie: 100
        });
        const spell = new Spell();
        player.element = document.getElementById('player');

        document.addEventListener('keydown', function(event) {
            switch(event.key) {
                case 'z':
                    player.moving = true;
                    player.position.y += 5;
                    break;
                case 'q':
                    player.moving = true;
                    player.position.x -= 5;
                    break;
                case 's':
                    player.moving = true;
                    player.position.y -= 5;
                    break;
                case 'd':
                    player.moving = true;
                    player.position.x += 5;
                    break;
                case 'k':
                    spell.launch(player.position.x, player.position.y);
                    break;
            }
        });

        document.addEventListener('keyup', function(event) {
            player.moving = false;
        });

        // Main game loop to move the player
        function gameLoop() {
            player.draw();
            requestAnimationFrame(gameLoop);
        }

        // Start the game loop
        gameLoop();
    </script>
</body>
</html>
